# ç‰ˆæœ¬æ§åˆ¶è¯´æ˜

## æ¦‚è¿°

CursorToolset ä» v1.0.0 å¼€å§‹æ”¯æŒæ™ºèƒ½ç‰ˆæœ¬æ§åˆ¶ï¼Œå¯ä»¥ï¼š
- æ£€æŸ¥æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬
- åªåœ¨éœ€è¦æ—¶æ›´æ–°ï¼Œé¿å…ä¸å¿…è¦çš„ä¸‹è½½å’Œæ„å»º
- å¯¹æ¯”æœ¬åœ°å’Œè¿œç¨‹ç‰ˆæœ¬å·

## ç‰ˆæœ¬å·ç®¡ç†

### å•ä¸€æ•°æ®æºåŸåˆ™

**æ‰€æœ‰ç‰ˆæœ¬å·éƒ½ä» `version.json` æ–‡ä»¶è¯»å–**ï¼Œè¿™æ˜¯ç‰ˆæœ¬å·çš„å”¯ä¸€æ¥æºã€‚

```json
{
  "version": "v1.0.0",
  "build_time": "",
  "commit": "",
  "branch": ""
}
```

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [VERSION_MANAGEMENT.md](./VERSION_MANAGEMENT.md)ã€‚

### ç‰ˆæœ¬å·æ ¼å¼

é‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ï¼ˆSemantic Versioningï¼‰ï¼š`vMAJOR.MINOR.PATCH`

ä¾‹å¦‚ï¼š
- `v1.0.0` - ä¸»ç‰ˆæœ¬ 1ï¼Œæ¬¡ç‰ˆæœ¬ 0ï¼Œè¡¥ä¸ç‰ˆæœ¬ 0
- `v1.2.3` - ä¸»ç‰ˆæœ¬ 1ï¼Œæ¬¡ç‰ˆæœ¬ 2ï¼Œè¡¥ä¸ç‰ˆæœ¬ 3
- `v2.0.0` - ä¸»ç‰ˆæœ¬ 2ï¼ˆé‡å¤§æ›´æ–°ï¼‰

## ç‰ˆæœ¬æ¯”è¾ƒé€»è¾‘

### æ¯”è¾ƒè§„åˆ™

1. **ä¸»ç‰ˆæœ¬å·**ï¼ˆMajorï¼‰æœ€é‡è¦ï¼Œä¼˜å…ˆæ¯”è¾ƒ
2. **æ¬¡ç‰ˆæœ¬å·**ï¼ˆMinorï¼‰å…¶æ¬¡
3. **è¡¥ä¸ç‰ˆæœ¬å·**ï¼ˆPatchï¼‰æœ€å

ç¤ºä¾‹ï¼š
```
v2.0.0 > v1.9.9  (ä¸»ç‰ˆæœ¬å·æ›´å¤§)
v1.2.0 > v1.1.9  (æ¬¡ç‰ˆæœ¬å·æ›´å¤§)
v1.0.2 > v1.0.1  (è¡¥ä¸ç‰ˆæœ¬å·æ›´å¤§)
v1.0.0 = v1.0.0  (å®Œå…¨ç›¸åŒ)
```

### ç‰¹æ®Šç‰ˆæœ¬

- `dev` - å¼€å‘ç‰ˆæœ¬ï¼Œæ€»æ˜¯è¢«è®¤ä¸ºéœ€è¦æ›´æ–°
- `unknown` - æœªçŸ¥ç‰ˆæœ¬ï¼ŒåŒ `dev`

## æ›´æ–°æœºåˆ¶

### 1. è‡ªæˆ‘æ›´æ–° (`--self`)

```bash
cursortoolset update --self
```

**æµç¨‹**ï¼š
1. ğŸ“Œ ä»æœ¬åœ° version.json è¯»å–å½“å‰ç‰ˆæœ¬
2. ğŸ”„ æ‰§è¡Œæ›´æ–°ï¼ˆå…‹éš†æœ€æ–°ä»£ç å¹¶é‡æ–°æ„å»ºï¼‰
3. âœ… æ›´æ–°å®Œæˆ

**ç¤ºä¾‹è¾“å‡º**ï¼š
```
ğŸ”„ æ›´æ–° CursorToolset...
  ğŸ“Œ å½“å‰ç‰ˆæœ¬: v1.0.0
  ğŸ”„ å¼€å§‹æ›´æ–°...
  ğŸ“ å½“å‰ä½ç½®: /Users/xxx/.cursortoolsets/CursorToolset/bin/cursortoolset
  ğŸ“¥ å…‹éš†æœ€æ–°ä»£ç ...
  ğŸ”¨ æ„å»ºæ–°ç‰ˆæœ¬...
  ğŸ“¦ æ›¿æ¢æ—§ç‰ˆæœ¬...
  âœ… CursorToolset æ›´æ–°å®Œæˆ
```

### 2. é…ç½®æ–‡ä»¶æ›´æ–° (`--available`)

```bash
cursortoolset update --available
```

**æµç¨‹**ï¼š
1. ğŸ“¥ ä» GitHub ä¸‹è½½æœ€æ–° `available-toolsets.json`
2. ğŸ” æ¯”è¾ƒæœ¬åœ°å’Œè¿œç¨‹æ–‡ä»¶å†…å®¹
3. âœ… å¦‚æœå†…å®¹ç›¸åŒï¼Œè·³è¿‡æ›´æ–°
4. ğŸ†• å¦‚æœæœ‰å˜åŒ–ï¼Œæ›¿æ¢æœ¬åœ°æ–‡ä»¶

**ç¤ºä¾‹è¾“å‡º**ï¼š
```
ğŸ”„ æ›´æ–° available-toolsets.json...
  ğŸ“ é…ç½®æ–‡ä»¶: /Users/xxx/.cursortoolsets/CursorToolset/available-toolsets.json
  ğŸ” æ£€æŸ¥é…ç½®æ–‡ä»¶æ›´æ–°...
  ğŸ“¥ ä¸‹è½½æœ€æ–°é…ç½®...
  âœ… é…ç½®æ–‡ä»¶å·²æ˜¯æœ€æ–°ï¼Œæ— éœ€æ›´æ–°
```

### 3. å·¥å…·é›†æ›´æ–° (`--toolsets`)

```bash
cursortoolset update --toolsets
```

**æµç¨‹**ï¼š
1. ğŸ”„ éå†æ‰€æœ‰å·²å®‰è£…çš„å·¥å…·é›†
2. ğŸ“¥ æ‰§è¡Œ `git fetch` æ£€æŸ¥è¿œç¨‹æ›´æ–°
3. ğŸ” æ£€æŸ¥æœ¬åœ°æ˜¯å¦è½åäºè¿œç¨‹ï¼ˆ`git status`ï¼‰
4. âœ… å¦‚æœå·²æ˜¯æœ€æ–°ï¼Œè·³è¿‡
5. ğŸ†• å¦‚æœæœ‰æ›´æ–°ï¼Œæ‰§è¡Œ `git pull`

**ç¤ºä¾‹è¾“å‡º**ï¼š
```
ğŸ”„ æ›´æ–°å·²å®‰è£…çš„å·¥å…·é›†...
  ğŸ”„ æ£€æŸ¥ GitHub Action AI å·¥å…·é›†...
    âœ… å·²æ˜¯æœ€æ–°ç‰ˆæœ¬

  ğŸ”„ æ£€æŸ¥ å¦ä¸€ä¸ªå·¥å…·é›†...
    ğŸ†• å‘ç°æ–°ç‰ˆæœ¬ï¼Œæ­£åœ¨æ›´æ–°...
    âœ… æ›´æ–°æˆåŠŸ

  ğŸ“Š æ›´æ–°ç»Ÿè®¡: æˆåŠŸ 1 ä¸ª
âœ… æ‰€æœ‰å·¥å…·é›†æ›´æ–°å®Œæˆ
```

## ç‰ˆæœ¬æ£€æŸ¥ API

### æŸ¥çœ‹å½“å‰ç‰ˆæœ¬

```bash
cursortoolset --version
# è¾“å‡º: cursortoolset version v1.0.0 (built at 2024-12-04_11:00:00)
```

**ç‰ˆæœ¬å·æ¥æº**ï¼šç¨‹åºä¼šä» `version.json` è¯»å–ç‰ˆæœ¬å·ï¼ˆå¦‚æœç¼–è¯‘æ—¶æœªæ³¨å…¥ï¼‰ã€‚

### ç¼–ç¨‹æ¥å£

CursorToolset æä¾›äº†ç‰ˆæœ¬æ¯”è¾ƒçš„ Go åŒ…ï¼š

```go
import "github.com/firoyang/CursorToolset/pkg/version"

// æ¯”è¾ƒä¸¤ä¸ªç‰ˆæœ¬
result := version.Compare("v1.0.0", "v1.0.1")
// result < 0: v1.0.0 < v1.0.1
// result = 0: ç›¸ç­‰
// result > 0: v1.0.0 > v1.0.1

// æ£€æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°
needUpdate := version.NeedUpdate("v1.0.0", "v1.1.0")
// needUpdate = true

// è·å– GitHub æœ€æ–°ç‰ˆæœ¬
release, err := version.GetLatestRelease("firoyang", "CursorToolset")
if err == nil {
    fmt.Println("æœ€æ–°ç‰ˆæœ¬:", release.TagName)
    fmt.Println("Release é¡µé¢:", release.HTMLURL)
}
```

## æ„å»ºæ—¶æ³¨å…¥ç‰ˆæœ¬å·

### ä½¿ç”¨ Makefile

```bash
make build       # ä½¿ç”¨ Git æ ‡ç­¾ä½œä¸ºç‰ˆæœ¬å·
make build-all   # æ„å»ºæ‰€æœ‰å¹³å°ï¼ŒåŒ…å«ç‰ˆæœ¬ä¿¡æ¯
```

### æ‰‹åŠ¨æ„å»º

```bash
# Makefile è‡ªåŠ¨ä» version.json è¯»å–ç‰ˆæœ¬å·
make build

# æˆ–æ‰‹åŠ¨æŒ‡å®š
VERSION=$(cat version.json | grep -o '"version"[[:space:]]*:[[:space:]]*"[^"]*"' | cut -d'"' -f4)
BUILD_TIME=$(date -u '+%Y-%m-%d_%H:%M:%S')
go build -ldflags "-X main.Version=$VERSION -X main.BuildTime=$BUILD_TIME" -o cursortoolset
```

**é‡è¦**ï¼šç‰ˆæœ¬å·å¿…é¡»ä» `version.json` è¯»å–ï¼Œä¸è¦ç¡¬ç¼–ç æˆ–ä»å…¶ä»–æ¥æºè·å–ã€‚

### GitHub Actions è‡ªåŠ¨æ„å»º

åœ¨ `.github/workflows/build.yml` å’Œ `.github/workflows/release-process.yml` ä¸­ï¼š
- ä» `version.json` è¯»å–ç‰ˆæœ¬å·
- è‡ªåŠ¨å¡«å…… `build_time`ã€`commit`ã€`branch` å­—æ®µ
- æ„å»ºå¤šå¹³å°ç‰ˆæœ¬
- åˆ›å»º GitHub Release

**ç‰ˆæœ¬å·æ¥æº**ï¼šå§‹ç»ˆä» `version.json` è¯»å–ï¼Œç¡®ä¿ä¸€è‡´æ€§ã€‚

## ç‰ˆæœ¬å‘å¸ƒæµç¨‹

### 1. å¼€å‘é˜¶æ®µ
```bash
# å¼€å‘ä¸­çš„ç‰ˆæœ¬å·
./cursortoolset --version
# è¾“å‡º: cursortoolset version dev
```

### 2. å‡†å¤‡å‘å¸ƒ
```bash
# 1. æ›´æ–° CHANGELOG.md
# 2. æäº¤æ‰€æœ‰æ›´æ”¹
git add .
git commit -m "chore: prepare for v1.1.0"

# 3. åˆ›å»º Git æ ‡ç­¾
git tag -a v1.1.0 -m "Release v1.1.0"

# 4. æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹
git push origin v1.1.0
```

### 3. è‡ªåŠ¨æ„å»º
- GitHub Actions è‡ªåŠ¨è§¦å‘
- æ„å»ºæ‰€æœ‰å¹³å°ç‰ˆæœ¬
- åˆ›å»º GitHub Release
- ä¸Šä¼ é¢„ç¼–è¯‘æ–‡ä»¶

### 4. ç”¨æˆ·æ›´æ–°
```bash
# ç”¨æˆ·æ‰§è¡Œæ›´æ–°
cursortoolset update --self

# ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬å¹¶æ›´æ–°
```

## ç½‘ç»œé—®é¢˜å¤„ç†

å¦‚æœæ— æ³•è¿æ¥ GitHub APIï¼š

```
ğŸ”„ æ›´æ–° CursorToolset...
  ğŸ” æ£€æŸ¥æ–°ç‰ˆæœ¬...
  âš ï¸  æ— æ³•æ£€æŸ¥ç‰ˆæœ¬: è¯·æ±‚å¤±è´¥
  â„¹ï¸  ç»§ç»­å°è¯•æ›´æ–°...
```

ç³»ç»Ÿä¼šè·³è¿‡ç‰ˆæœ¬æ£€æŸ¥ï¼Œç›´æ¥æ‰§è¡Œæ›´æ–°ã€‚

## æœ€ä½³å®è·µ

### ç”¨æˆ·
1. **å®šæœŸæ›´æ–°**ï¼šå»ºè®®æ¯æœˆè¿è¡Œ `cursortoolset update`
2. **æŸ¥çœ‹ç‰ˆæœ¬**ï¼šå®‰è£…åå…ˆè¿è¡Œ `cursortoolset --version` ç¡®è®¤
3. **ç½‘ç»œé—®é¢˜**ï¼šå¦‚é‡ GitHub è®¿é—®é—®é¢˜ï¼Œå¯ä»¥æ‰‹åŠ¨ä»æºç æ„å»º

### å¼€å‘è€…
1. **è¯­ä¹‰åŒ–ç‰ˆæœ¬**ï¼šéµå¾ª SemVer è§„èŒƒ
2. **Git æ ‡ç­¾**ï¼šæ¯ä¸ªç‰ˆæœ¬éƒ½æ‰“ tag
3. **CHANGELOG**ï¼šè®°å½•æ¯ä¸ªç‰ˆæœ¬çš„å˜æ›´
4. **æµ‹è¯•**ï¼šå‘å¸ƒå‰å……åˆ†æµ‹è¯•

## æ•…éšœæ’é™¤

### é—®é¢˜ 1: ç‰ˆæœ¬æ£€æŸ¥å¤±è´¥

**é”™è¯¯**ï¼š`æ— æ³•æ£€æŸ¥ç‰ˆæœ¬: è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç : 403`

**åŸå› **ï¼šGitHub API è¯·æ±‚é™åˆ¶

**è§£å†³**ï¼š
- ç­‰å¾…ä¸€æ®µæ—¶é—´åé‡è¯•
- ä½¿ç”¨ GitHub Tokenï¼ˆç¯å¢ƒå˜é‡ `GITHUB_TOKEN`ï¼‰

### é—®é¢˜ 2: æ›´æ–°åç‰ˆæœ¬å·ä¸å˜

**åŸå› **ï¼šä½¿ç”¨çš„æ˜¯å¼€å‘ç‰ˆæœ¬ï¼Œæœªæ³¨å…¥ç‰ˆæœ¬å·

**è§£å†³**ï¼š
```bash
# ä½¿ç”¨ Makefile æ„å»º
make build

# æˆ–æ‰‹åŠ¨æŒ‡å®šç‰ˆæœ¬
go build -ldflags "-X main.Version=v1.0.0" -o cursortoolset
```

### é—®é¢˜ 3: æ— æ³•è·å–æœ€æ–°ç‰ˆæœ¬

**åŸå› **ï¼šGitHub ä¸Šæ²¡æœ‰ Release

**è§£å†³**ï¼š
- ç¡®ä¿åœ¨ GitHub ä¸Šåˆ›å»ºäº† Release
- æˆ–ä» `main` åˆ†æ”¯æ„å»º

## å‚è€ƒèµ„æº

- [è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ](https://semver.org/lang/zh-CN/)
- [GitHub Releases](https://docs.github.com/en/repositories/releasing-projects-on-github)
- [Go Build å‚æ•°æ³¨å…¥](https://pkg.go.dev/cmd/go#hdr-Compile_packages_and_dependencies)

